name: CI

on: [push]

env:
  REMOTE_HOST: davidspiv.com
  REMOTE_USER: ubuntu
  REMOTE_TARGET: /var/www/davidspivack.com/portfolio/dist/

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Defining a new Environment Variable
      run: |                          
          MULTI_LINES_TEXT="-----BEGIN RSA PRIVATE KEY----- \n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 \n-----END RSA PRIVATE KEY-----" 

          echo "MULTI_LINES_TEXT_ENV_VAR<<EOF" >> $SSH_PRIVATE_KEY
          # here we can place the command that will generate multi-line text
          echo $MULTI_LINES_TEXT >> $SSH_PRIVATE_KEY
          echo "EOF" >> $SSH_PRIVATE_KEY
    - name: Deploy to Server
      uses: easingthemes/ssh-deploy@main
      with:
          SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
          ARGS: "-rlgoDzvc -i --delete"
          SOURCE: "dist/"
          REMOTE_HOST: ${{ secrets.REMOTE_HOST }}
          REMOTE_USER: ${{ secrets.REMOTE_USER }}
          TARGET: ${{ secrets.REMOTE_TARGET }}
          EXCLUDE: "/src/, /node_modules/, .eslintrc.js, CNAME, .gitignore, package.json, pnpm-lock.yaml"
